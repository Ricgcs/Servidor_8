<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../img/logo_inteiro.png">
    <link rel="stylesheet" href="../estilo/equipe.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

    <title id="titulo"></title>
</head>
<body>
<header id="cabecalho">
    <h1 id="header_inovaworks">InovaWorks</h1>

    <div id="header_links">
        <a href="./inicial_login.html"><img id="imagem" src="../img/home.png" alt="menu"><button id="header_button">Home</button></a>
        <a href="./index.html"><img id="imagem" src="../img/servicos.png" alt="servicos"><button id="header_button">Serviços</button></a>
        <a href="./estoque.html"><img id="imagem" src="../img/armazen.png" alt="estoque"><button id="header_button">Estoque</button></a>
        <a href="#"><img id="imagem" src="../img/nsei.png" alt="ajuda"><button id="header_button">Ajuda</button></a>
        <a href="#"><img id="imagem" src="../img/flecha.png" alt="log_out"><button id="header_button" onclick="logOut()">Log out</button></a>
    </div>

    <div id="header_user">
        <img id="img_user" src="" alt="imagem_usuario">
        <div id="header_config">
            <h1 id="nome_user"></h1>
            <a id="link_user" href="./config.html">configuração</a>
        </div>
    </div>
</header>

<div id="corpo">

   <div id="barra_lateral">
    
    <button id="button_cargo" class="hover-bar">Cargos</button>
    <button id="button_funcionario" class="hover-bar">Funcionários</button>
    <button id="button_fornecedor" class="hover-bar">Fornecedors</button>
    <div class="custom-hr"></div>
   </div>

   <div id="conteudo">
    <div id="cabeca_connteudo">
        
        <div id="pesquisa">
            <input type="text" id="input_pesquisa_conteudo">
            <button id="pesquisa_lupa"><img src="../img/lupa.png" id="pesq"></button>
        </div>

    

    </div>

    <div id="corpo_conteudo">

    </div>
   </div>
</div>

<script>
function logOut() {  
    if (confirm("Tem certeza que deseja sair da conta?")) {
        localStorage.clear();
        window.location.href = './login_empresa.html';
    } 
}

document.addEventListener('DOMContentLoaded', () => {
    const nomeUser = localStorage.getItem('nome') || 'Usuário';
    const senhaUser = localStorage.getItem('senha');
    const codUser = localStorage.getItem('cnpj');
    const nome = localStorage.getItem("nome");
    if (!nomeUser || !senhaUser || !codUser) {
        alert("faça o login");
        window.location.href = "../../inicial/front/inicial.html";
    }
   
    const loadFromLocalStorage = () => {
        const nomeUserElement = document.getElementById('nome_user');
        if (nomeUserElement) {
            const primeiroNome = nomeUser.split(" ")[0];
            nomeUserElement.textContent = `${primeiroNome}`; 
        }

        const imgUserElement = document.getElementById('img_user');
        async function loadImage() {
            try {
                const response = await fetch(`http://localhost:3000/empresa/imagem/${nomeUser}`);
                const blob = await response.blob();
                if (response.ok) {
                    imgUserElement.src = blob ? URL.createObjectURL(blob) : "../img/imagem_user.png";
                } else {
                    alert("erro médio");
                }
            } catch (error) {
                imgUserElement.src = "../img/imagem_user.png";
                console.error(error);
            }  
        }
        loadImage();
    };
    
    loadFromLocalStorage();


    const btn_cargo = document.getElementById('button_cargo');
    const btn_funcionario = document.getElementById('button_funcionario');
    const btn_fornecedor = document.getElementById('button_fornecedor');

    const input_cargo_nome = document.createElement("input");
    input_cargo_nome.id ="input_cargo_nome";
    input_cargo_nome.placeholder = "Nome do cargo";

    const input_cargo_salario = document.createElement("input");
    input_cargo_salario.id ="input_cargo_salario";
    input_cargo_salario.placeholder = "Quantidade salário";
    input_cargo_salario.type = "number";

    const button_cadastro= document.createElement("button");
    button_cadastro.id ="button_cadastro";
    button_cadastro.textContent = "Cadastrar";

    const button_visualizar = document.createElement("button");
    button_visualizar.id ="button_visualizar";
    button_visualizar.textContent = "Vizualizar";


    const div_header = document.createElement("div");
    div_header.id = "div_header";


 const cadastros = async ()=>{
    const tela = document.getElementById('corpo_conteudo');
    const div_cadastro = document.createElement('div');
    div_cadastro.id = "div_cadastro";

    btn_cargo.addEventListener('click',()=>{
        tela.innerHTML = "";
        


        tela.appendChild(div_cadastro);
        div_cadastro.appendChild(div_header)
        div_header.textContent = "Cadastro cargo";
        div_cadastro.appendChild(input_cargo_nome);
        div_cadastro.appendChild(input_cargo_salario);
        div_cadastro.appendChild(button_cadastro);
        div_cadastro.appendChild(button_visualizar);
    });

 }

cadastros();
  

});
</script>
</body>
</html>
